<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safe AI Example</title>
    <link rel="stylesheet" href="index.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="card-container">
        <h1>Random Math Problem</h1>
        <div class="input-area">
            <input type="text" id="question" placeholder="Type your question here..." />
            <button id="ask-ai">Ask AI âœ¨</button>
        </div>
        <div class="response-area">
            <p id="ai-response">Your AI answer will appear here!</p>
        </div>
    </div>

    <script>
        
        document.addEventListener('DOMContentLoaded', () => {
            const askAiBtn = document.getElementById('ask-ai');
            const questionInput = document.getElementById('question');
            const aiResponseElem = document.getElementById('ai-response');

            if (askAiBtn && questionInput && aiResponseElem) {
                askAiBtn.addEventListener('click', () => {
                    const question = questionInput.value.trim(); 

                    if (!question) {
                        aiResponseElem.textContent = "Please type a question before asking!";
                        aiResponseElem.style.color = '#ef4444'; 
                        return;
                    }

                    
                    aiResponseElem.style.color = '#cbd5e1'; 
                    aiResponseElem.textContent = 'Thinking... ðŸ¤”'; 

                    
                    fetch('http://localhost:4000/ai', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ prompt: question })
                    })
                    .then(res => {
                        if (!res.ok) {
                            throw new Error(`HTTP error! Status: ${res.status}`);
                        }
                        return res.json();
                    })
                    .then(data => {
                        const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text || 'No answer found. Please try again.';
                        aiResponseElem.textContent = aiText;
                    })
                    .catch(err => {
                        console.error('Error fetching AI response:', err);
                        aiResponseElem.textContent = `Error: Could not get an answer. Make sure your server is running!`;
                        aiResponseElem.style.color = '#ef4444'; 
                    });
                });
            } else {
                console.error("One or more required elements not found in the DOM.");
            }
        });
    </script>
</body>
</html>

